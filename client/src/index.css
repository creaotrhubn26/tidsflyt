@tailwind base;
@tailwind components;
@tailwind utilities;

/* LIGHT MODE */
:root {
  --button-outline: rgba(0,0,0, .10);
  --badge-outline: rgba(0,0,0, .05);
  --opaque-button-border-intensity: -8;
  --elevate-1: rgba(0,0,0, .03);
  --elevate-2: rgba(0,0,0, .08);
  --background: 210 20% 98%;
  --foreground: 222 47% 11%;
  --border: 214 20% 88%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --card-border: 214 20% 92%;
  --sidebar: 222 47% 11%;
  --sidebar-foreground: 210 40% 98%;
  --sidebar-border: 222 40% 16%;
  --sidebar-primary: 199 89% 48%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 222 40% 18%;
  --sidebar-accent-foreground: 210 40% 98%;
  --sidebar-ring: 199 89% 48%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --popover-border: 214 20% 88%;
  --primary: 199 89% 48%;
  --primary-foreground: 0 0% 100%;
  --secondary: 215 20% 93%;
  --secondary-foreground: 222 47% 20%;
  --muted: 215 16% 94%;
  --muted-foreground: 215 16% 47%;
  --accent: 215 20% 95%;
  --accent-foreground: 222 47% 20%;
  --destructive: 0 72% 51%;
  --destructive-foreground: 0 0% 100%;
  --input: 214 20% 82%;
  --ring: 199 89% 48%;
  --chart-1: 199 89% 48%;
  --chart-2: 142 71% 45%;
  --chart-3: 262 83% 58%;
  --chart-4: 38 92% 50%;
  --chart-5: 12 76% 61%;
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;
  --warning: 38 92% 50%;
  --warning-foreground: 0 0% 100%;
  --info: 199 89% 48%;
  --info-foreground: 0 0% 100%;
  --font-sans: Inter, sans-serif;
  --font-serif: Georgia, serif;
  --font-mono: JetBrains Mono, monospace;
  --radius: .5rem;
  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --tracking-normal: 0em;
  --spacing: 0.25rem;

/* Fallback for older browsers */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* ── CalendarHeatmap design tokens ── */
  --hm-accent: #1F6B73;
  --hm-accent-light: #3EA3B5;
  --hm-surface: #ffffff;
  --hm-surface-secondary: #f7fbf9;
  --hm-surface-panel: #f4f8f7;
  --hm-surface-card: #fafcfb;
  --hm-border: #d8e4e0;
  --hm-border-subtle: rgba(11, 33, 39, 0.08);
  --hm-border-muted: #d2dfdb;
  --hm-text: #153c46;
  --hm-text-secondary: #53686f;
  --hm-text-muted: #6a7a7f;
  --hm-text-body: #1f414a;
  --hm-text-dim: #5e7479;
  --hm-marker-holiday: #E55B4C;
  --hm-marker-vacation: #E3A93A;
  --hm-today-dot: #1F6B73;
  --hm-accent-muted: rgba(31, 107, 115, 0.3);
  --hm-shadow: 0 12px 30px rgba(20, 58, 65, 0.07);
  --hm-cell-active-shadow: 0 1px 3px rgba(20, 88, 100, 0.12), 0 0 0 0.5px rgba(31, 107, 115, 0.08);
  --hm-palette-0: #EDF3F4;
  --hm-palette-1: #D4E8EB;
  --hm-palette-2: #A8CED5;
  --hm-palette-3: #6EB1BE;
  --hm-palette-4: #3E95A3;
  --hm-palette-5: #1F6B73;

  /* ── ActivityFeed design tokens ── */
  --af-accent: #1F6B73;
  --af-accent-fg: #ffffff;
  --af-surface: rgba(255,255,255,0.95);
  --af-border: #d8e4e0;
  --af-text: #24383e;
  --af-text-muted: #5d6d72;
  --af-unread-bg: #f6fbfa;
  --af-stamp-bg: rgba(31,107,115,0.1);
  --af-stamp-fg: #1F6B73;
  --af-stamp-ring: rgba(31,107,115,0.1);
  --af-info-bg: rgba(14,165,233,0.1);
  --af-info-fg: #0ea5e9;
  --af-info-ring: rgba(14,165,233,0.1);
  --af-empty-icon: 0.2;
  --af-row-hover: rgba(255,255,255,0.8);
  --af-filter-active-bg: #1F6B73;
  --af-filter-active-fg: #ffffff;
}

.dark {
  --button-outline: rgba(255,255,255, .10);
  --badge-outline: rgba(255,255,255, .05);
  --opaque-button-border-intensity: 9;
  --elevate-1: rgba(255,255,255, .04);
  --elevate-2: rgba(255,255,255, .09);
  --background: 222 47% 8%;
  --foreground: 210 20% 92%; /* Softer off-white, WCAG AA compliant */
  --border: 222 40% 18%; /* Increased contrast */
  --card: 222 47% 11%;
  --card-foreground: 210 20% 92%; /* Softer off-white, WCAG AA compliant */
  --card-border: 222 40% 18%; /* Increased contrast */
  --sidebar: 222 47% 6%;
  --sidebar-foreground: 210 20% 92%;
  --sidebar-border: 222 40% 12%;
  --sidebar-primary: 199 89% 48%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 222 40% 14%;
  --sidebar-accent-foreground: 210 20% 92%;
  --sidebar-ring: 199 89% 48%;
  --popover: 222 47% 11%;
  --popover-foreground: 210 20% 92%;
  --popover-border: 222 40% 18%; /* Increased contrast */
  --primary: 199 89% 48%;
  --primary-foreground: 0 0% 100%;
  --secondary: 222 40% 18%;
  --secondary-foreground: 210 20% 92%;
  --muted: 222 40% 15%;
  --muted-foreground: 215 20% 75%; /* WCAG AA compliant on muted (from 16% 65%) */
  --accent: 222 40% 14%;
  --accent-foreground: 210 20% 92%;
  --destructive: 0 62% 50%;
  --destructive-foreground: 0 0% 100%;
  --input: 222 40% 24%; /* Increased contrast */
  --ring: 199 89% 48%;
  --chart-1: 199 89% 58%;
  --chart-2: 142 71% 55%;
  --chart-3: 262 83% 68%;
  --chart-4: 38 92% 60%;
  --chart-5: 12 76% 65%;
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;
  --warning: 38 92% 50%;
  --warning-foreground: 0 0% 100%;
  --info: 199 89% 48%;
  --info-foreground: 0 0% 100%;

  /* ── ActivityFeed dark tokens ── */
  --af-accent: #51C2D0;
  --af-accent-fg: #0e1a1f;
  --af-surface: rgba(15,25,30,0.95);
  --af-border: hsl(222 40% 18%);
  --af-text: hsl(210 20% 92%);
  --af-text-muted: hsl(215 20% 75%);
  --af-unread-bg: #0f1f25;
  --af-stamp-bg: rgba(81,194,208,0.1);
  --af-stamp-fg: #51C2D0;
  --af-stamp-ring: rgba(81,194,208,0.1);
  --af-info-bg: rgba(56,189,248,0.1);
  --af-info-fg: #38bdf8;
  --af-info-ring: rgba(56,189,248,0.1);
  --af-empty-icon: 0.2;
  --af-row-hover: hsl(222 47% 14%);
  --af-filter-active-bg: #51C2D0;
  --af-filter-active-fg: #0e1a1f;

  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);

/* Fallback for older browsers */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* ── CalendarHeatmap dark tokens ── */
  --hm-accent: #3EA3B5;
  --hm-accent-light: #51C2D0;
  --hm-surface: hsl(var(--card));
  --hm-surface-secondary: hsl(var(--card));
  --hm-surface-panel: hsl(var(--muted));
  --hm-surface-card: hsl(var(--muted));
  --hm-border: hsl(var(--border));
  --hm-border-subtle: hsl(var(--border));
  --hm-border-muted: hsl(var(--border));
  --hm-text: hsl(var(--foreground));
  --hm-text-secondary: hsl(var(--muted-foreground));
  --hm-text-muted: hsl(var(--muted-foreground));
  --hm-text-body: hsl(var(--foreground));
  --hm-text-dim: hsl(var(--muted-foreground));
  --hm-marker-holiday: #E55B4C;
  --hm-marker-vacation: #E3A93A;
  --hm-today-dot: #51C2D0;
  --hm-accent-muted: rgba(62, 163, 181, 0.3);
  --hm-shadow: none;
  --hm-cell-active-shadow: 0 1px 3px rgba(0, 0, 0, 0.25), 0 0 0 0.5px rgba(62, 163, 181, 0.15);
  --hm-palette-0: #1A2830;
  --hm-palette-1: #1E3A44;
  --hm-palette-2: #245260;
  --hm-palette-3: #2D6D7C;
  --hm-palette-4: #3A8D9C;
  --hm-palette-5: #51C2D0;
}

:root {
  /* Shared 7-tier responsive system (base + xs + sm + md + lg + xl + 2xl + 3xl) */
  --rt-gutter: 1rem;
  --rt-max-width: 1200px;
  --rt-section-y: 2.5rem;
  --rt-panel-pad: 1rem;
  --rt-h1: 2rem;
  --rt-h2: 1.625rem;
  --rt-body: 1rem;
}

@media (min-width: 375px) {
  :root {
    --rt-gutter: 1.125rem;
    --rt-section-y: 2.75rem;
    --rt-panel-pad: 1.125rem;
    --rt-h1: 2.15rem;
    --rt-h2: 1.75rem;
    --rt-body: 1rem;
  }
}

@media (min-width: 640px) {
  :root {
    --rt-gutter: 1.5rem;
    --rt-max-width: 1240px;
    --rt-section-y: 3.25rem;
    --rt-panel-pad: 1.25rem;
    --rt-h1: 2.4rem;
    --rt-h2: 1.95rem;
    --rt-body: 1.02rem;
  }
}

@media (min-width: 768px) {
  :root {
    --rt-gutter: 1.75rem;
    --rt-max-width: 1280px;
    --rt-section-y: 3.75rem;
    --rt-panel-pad: 1.5rem;
    --rt-h1: 2.7rem;
    --rt-h2: 2.15rem;
    --rt-body: 1.03rem;
  }
}

@media (min-width: 1024px) {
  :root {
    --rt-gutter: 2rem;
    --rt-max-width: 1320px;
    --rt-section-y: 4.25rem;
    --rt-panel-pad: 1.75rem;
    --rt-h1: 3rem;
    --rt-h2: 2.35rem;
    --rt-body: 1.05rem;
  }
}

@media (min-width: 1280px) {
  :root {
    --rt-gutter: 2.5rem;
    --rt-max-width: 1360px;
    --rt-section-y: 4.75rem;
    --rt-panel-pad: 2rem;
    --rt-h1: 3.3rem;
    --rt-h2: 2.55rem;
    --rt-body: 1.08rem;
  }
}

@media (min-width: 1536px) {
  :root {
    --rt-gutter: 3rem;
    --rt-max-width: 1460px;
    --rt-section-y: 5.25rem;
    --rt-panel-pad: 2.25rem;
    --rt-h1: 3.6rem;
    --rt-h2: 2.75rem;
    --rt-body: 1.1rem;
  }
}

@media (min-width: 1920px) {
  :root {
    --rt-gutter: 3.5rem;
    --rt-max-width: 1600px;
    --rt-section-y: 5.75rem;
    --rt-panel-pad: 2.5rem;
    --rt-h1: 3.9rem;
    --rt-h2: 3rem;
    --rt-body: 1.14rem;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

@layer components {
  .rt-container {
    width: min(calc(100% - (var(--rt-gutter) * 2)), var(--rt-max-width));
    margin-inline: auto;
  }

  .rt-section {
    padding-block: var(--rt-section-y);
  }

  .rt-panel {
    padding: var(--rt-panel-pad);
  }

  .rt-h1 {
    font-size: var(--rt-h1);
    line-height: 1.06;
  }

  .rt-h2 {
    font-size: var(--rt-h2);
    line-height: 1.12;
  }

  .rt-body {
    font-size: var(--rt-body);
    line-height: 1.6;
  }
}

/**
 * Using the elevate system.
 * Automatic contrast adjustment.
 *
 * <element className="hover-elevate" />
 * <element className="active-elevate-2" />
 *
 * // Using the tailwind utility when a data attribute is "on"
 * <element className="toggle-elevate data-[state=on]:toggle-elevated" />
 * // Or manually controlling the toggle state
 * <element className="toggle-elevate toggle-elevated" />
 *
 * Elevation systems have to handle many states.
 * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)
 * - toggled or not
 * - focused or not (this is not handled with these utilities)
 *
 * Even without handling focused or not, this is six possible combinations that
 * need to be distinguished from eachother visually.
 */
@layer utilities {

  /* Hide ugly search cancel button in Chrome until we can style it properly */
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  /* Placeholder styling for contentEditable div */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of
   * buttons/badges can remove the automatic brightness adjustment on interactions
   * and program their own. */
  .no-default-hover-elevate {}

  .no-default-active-elevate {}


  /**
   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.
   * This way they can stack/compound. Both will overlap the parent's borders!
   * So borders will be automatically adjusted both on toggle, and hover/active,
   * and they will be compounded.
   */
  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: -1;
    /* sits behind content but above backdrop */
  }

  .toggle-elevate.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.toggle-elevate::before {
    inset: -1px;
  }

  /* Does not work on elements with overflow:hidden! */
  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: 999;
    /* sits in front of content */
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }
}

/* React Quill Editor Styles */
.rich-text-editor .ql-toolbar {
  border: none;
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--muted));
  border-radius: var(--radius) var(--radius) 0 0;
}

.rich-text-editor .ql-container {
  border: none;
  font-family: var(--font-sans);
  font-size: 0.875rem;
  min-height: var(--min-height, 200px);
}

.rich-text-editor .ql-editor {
  min-height: var(--min-height, 200px);
  padding: 0.75rem 1rem;
  color: hsl(var(--foreground));
}

.rich-text-editor .ql-editor.ql-blank::before {
  color: hsl(var(--muted-foreground));
  font-style: normal;
}

.rich-text-editor .ql-toolbar button {
  color: hsl(var(--foreground));
}

.rich-text-editor .ql-toolbar button:hover {
  color: hsl(var(--primary));
}

.rich-text-editor .ql-toolbar button.ql-active {
  color: hsl(var(--primary));
}

.rich-text-editor .ql-toolbar .ql-stroke {
  stroke: hsl(var(--foreground));
}

.rich-text-editor .ql-toolbar button:hover .ql-stroke {
  stroke: hsl(var(--primary));
}

.rich-text-editor .ql-toolbar button.ql-active .ql-stroke {
  stroke: hsl(var(--primary));
}

.rich-text-editor .ql-toolbar .ql-fill {
  fill: hsl(var(--foreground));
}

.rich-text-editor .ql-toolbar button:hover .ql-fill {
  fill: hsl(var(--primary));
}

.rich-text-editor .ql-toolbar button.ql-active .ql-fill {
  fill: hsl(var(--primary));
}

.rich-text-editor .ql-toolbar .ql-picker {
  color: hsl(var(--foreground));
}

.rich-text-editor .ql-toolbar .ql-picker-options {
  background: hsl(var(--popover));
  border-color: hsl(var(--border));
  border-radius: var(--radius);
}

.rich-text-editor .ql-toolbar .ql-picker-item:hover {
  color: hsl(var(--primary));
}

/* Rich Text Viewer Styles */
.rich-text-viewer h1 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.rich-text-viewer h2 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.rich-text-viewer h3 {
  font-size: 1.125rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.rich-text-viewer p {
  margin-bottom: 0.5rem;
}

.rich-text-viewer ul,
.rich-text-viewer ol {
  padding-left: 1.5rem;
  margin-bottom: 0.5rem;
}

.rich-text-viewer blockquote {
  border-left: 3px solid hsl(var(--border));
  padding-left: 1rem;
  font-style: italic;
  color: hsl(var(--muted-foreground));
}

.rich-text-viewer a {
  color: hsl(var(--primary));
  text-decoration: underline;
}
/* ── Layer tree depth padding (replaces inline-style padding-left) ──────── */
[data-depth="0"] { padding-left: 8px; }
[data-depth="1"] { padding-left: 24px; }
[data-depth="2"] { padding-left: 40px; }
[data-depth="3"] { padding-left: 56px; }
[data-depth="4"] { padding-left: 72px; }
[data-depth="5"] { padding-left: 88px; }

/* ── Dynamic percentage bars (replaces inline-style width divs) ─────────── */
/* Usage: <progress value={n} max={100} className="h-full w-full bar-pct bar-pct-*"> inside a bg+rounded container */
.bar-pct { display: block; width: 100%; height: 100%; appearance: none; background: transparent; border: none; }
.bar-pct::-webkit-progress-bar { background: transparent; }
.bar-pct::-webkit-progress-value { background: hsl(var(--primary)); border-radius: 9999px; transition: all 300ms ease; }
.bar-pct::-moz-progress-bar   { background: hsl(var(--primary)); border-radius: 9999px; transition: all 300ms ease; }

.bar-pct-blue-cyan::-webkit-progress-value { background: linear-gradient(to right, #3b82f6, #06b6d4); }
.bar-pct-blue-cyan::-moz-progress-bar      { background: linear-gradient(to right, #3b82f6, #06b6d4); }

.bar-pct-purple-pink::-webkit-progress-value { background: linear-gradient(to right, #a855f7, #ec4899); }
.bar-pct-purple-pink::-moz-progress-bar      { background: linear-gradient(to right, #a855f7, #ec4899); }

.bar-pct-emerald-teal::-webkit-progress-value { background: linear-gradient(to right, #10b981, #14b8a6); }
.bar-pct-emerald-teal::-moz-progress-bar      { background: linear-gradient(to right, #10b981, #14b8a6); }

.bar-pct-form-complete::-webkit-progress-value { background: #22c55e; }
.bar-pct-form-complete::-moz-progress-bar      { background: #22c55e; }
.bar-pct-form-low::-webkit-progress-value { background: #f59e0b; }
.bar-pct-form-low::-moz-progress-bar      { background: #f59e0b; }

/* ── Heatmap calendar cells ─────────────────────────────────────────────── */
.hm-cell { background-color: var(--hm-palette-0); box-shadow: none; }
.hm-cell[data-intensity="1"] { background-color: var(--hm-palette-1); }
.hm-cell[data-intensity="2"] { background-color: var(--hm-palette-2); }
.hm-cell[data-intensity="3"] { background-color: var(--hm-palette-3); }
.hm-cell[data-intensity="4"] { background-color: var(--hm-palette-4); }
.hm-cell[data-intensity="5"] { background-color: var(--hm-palette-5); }
.hm-cell[data-in-row="true"]  { background-color: transparent; }
.hm-cell[data-has-shadow="true"] { box-shadow: var(--hm-cell-active-shadow); }

/* ── Heatmap legend swatches ─────────────────────────────────────────────── */
.hm-legend-swatch[data-palette-idx="0"] { background-color: var(--hm-palette-0); }
.hm-legend-swatch[data-palette-idx="1"] { background-color: var(--hm-palette-1); }
.hm-legend-swatch[data-palette-idx="2"] { background-color: var(--hm-palette-2); }
.hm-legend-swatch[data-palette-idx="3"] { background-color: var(--hm-palette-3); }
.hm-legend-swatch[data-palette-idx="4"] { background-color: var(--hm-palette-4); }
.hm-legend-swatch[data-palette-idx="5"] { background-color: var(--hm-palette-5); }

/* ── Heatmap goal progress bar ───────────────────────────────────────────── */
.hm-progress-bar { appearance: none; display: block; overflow: hidden; }
.hm-progress-bar::-webkit-progress-bar { background-color: var(--hm-palette-0); border-radius: 9999px; }
.hm-progress-bar::-webkit-progress-value { background-color: var(--hm-accent); border-radius: 9999px; transition: width 300ms ease; }
.hm-progress-bar::-moz-progress-bar { background-color: var(--hm-accent); border-radius: 9999px; }

/* Safe area insets for notched/rounded devices (iOS home indicator, camera cutouts) */
.safe-area-padding {
  padding-left: max(1rem, env(safe-area-inset-left));
  padding-right: max(1rem, env(safe-area-inset-right));
  padding-top: max(1rem, env(safe-area-inset-top));
  padding-bottom: max(1rem, env(safe-area-inset-bottom));
}